<!DOCTYPE html>
<html id="spryker-academy" lang="en-us" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Developing with Spryker|Module Guide|Products">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0" />
        <meta name="author" content="Spryker Systems GmbH" />
        <meta name="title" content="Spryker Academy" />
        <meta name="msapplication-config" content="/resources/ui/images/favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="/resources/ui/images/favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="/resources/ui/images/favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="/resources/ui/images/favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="/resources/ui/images/favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="/resources/ui/images/favicons/favicon-16x16.png" /><title>Product Set</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <style>@import url('https://fonts.googleapis.com/css?family=Lato:300,400,400i,900');

</style>
        <link href="/resources/ui/css/academy-ui-typography.css" rel="stylesheet" />
        <link href="/resources/ui/css/academy-ui-app.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../resources/ui/css/academy-ui-typography.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body class="t-base t-base--page js-base-template">
        <div class="t-base__header">
            <header class="o-header">
                <div class="o-header__content g-grid g-grid--container g-grid--middle"><a class="m-logo g-col g-col--sm-10 g-col--lg-2" href="/"><img class="m-logo__image" src="/resources/ui/images/logo.png" alt="Spryker Logo" /></a>
                    <nav class="m-nav-top g-col g-col--sm-2 g-col--lg-10" id="nav-top">
                        <div class="u-is-hidden--sm-xl">
                            <ul class="nocontent menu mc-component" data-mc-linked-toc="Data/Tocs/spryker_content.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                            </ul>
                        </div>
                        <div class="u-is-hidden--xl"><a class="m-nav-top__toggler js-base-template__toggler" href="#"><span class="icon icon-bars"></span></a>
                        </div>
                    </nav>
                </div>
            </header>
        </div>
        <div class="t-base__frame">
            <section class="o-search">
                <div class="g-grid g-grid--container">
                    <section class="m-search g-col g-col--sm-12">
                        <form action="/search.html" method="GET">
                            <input class="a-input a-input--expanded m-search__input" placeholder="Search in the Academy..." name="q" />
                            <button class="m-search__submit" type="submit"><span class="icon icon-search"></span>
                            </button>
                        </form>
                    </section>
                </div>
            </section>
            <section class="t-base__widgets g-grid g-grid--container g-grid--middle">
                <section class="m-breadcrumbs g-col g-col--sm-12 g-col--xl-8">
                    <div class="nocontent">
                        <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                        </div>
                    </div>
                </section>
                <div class="g-col g-col--sm-12 g-col--xl-4 u-align-right">
                    <section class="m-widget-toolbar">
                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_topic_toolbar mc-component nocontent">
                            <div class="button-group-container-left">
                                <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                </button>
                                <button class="button needs-pie next-topic-button" title="Navigate next">
                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                </button>
                                <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                </button>
                                <button class="button needs-pie print-button" title="Print">
                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                </button>
                            </div>
                        </div>
                    </section>
                    <div class="m-widget-github js-widget-github"><a class="m-widget-github__link icon icon-github js-widget-github__link" href="https://github.com/spryker/spryker-academy" target="_blank"></a>
                    </div>
                </div>
            </section>
            <main class="t-base__main g-grid g-grid--container">
                <div class="g-col g-col--sm-12 u-is-hidden--xl">
                    <div class="m-accordion js-accordion">
                        <div class="m-accordion__header">
                            <div class="m-accordion__title js-accordion__toggler"><span class="icon icon-ellipsis-v icon--left"></span>
                    Navigation
                </div>
                        </div>
                        <div class="m-accordion__content js-accordion__content">
                            <nav class="m-nav-sidebar" id="nav-sidebar">
                                <ul class="nocontent menu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/spryker_content.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
                <div class="t-page-sidebar__content o-content g-col g-col--sm-12 g-col--xl-8 js-anchorer js-highlighter js-widget-copy">
                    <h1>Product Set</h1>
                    <h2>Overview</h2>
                    <p>The Product Sets feature allows you to put together multiple products for the purpose of emphasizing that the set of products can be bought together. Product Sets usually have their own separate list and detail pages in the shop frontend where customers can add containing products to the cart.</p>
                    <p>This feature is supported by 3 modules:</p>
                    <ol>
                        <li value="1"><strong>ProductSet <span class="Generalbundle/module">module</span> <![CDATA[ ]]></strong>
                            <br />Manages the Product Set’s core functionalities such as persisting all related data to database and reading from it. It also provides Client functionality to list Product Sets from Search.</li>
                        <li value="2"><strong>ProductSetCollector <span class="Generalbundle/module">module</span> <![CDATA[ ]]></strong>
                            <br />Provides full Collector logic to export Product Sets to Search and Storage.</li>
                        <li value="3"><strong>ProductSetGui <span class="Generalbundle/module">module</span> <![CDATA[ ]]></strong>
                            <br />Provides a Zed UI to manage (create, list, update, delete and reorder) Product Sets.</li>
                    </ol>
                    <h2>Feature integration</h2>
                    <h3>Prerequisites</h3>
                    <p><strong>To prepare your project to work with Product Sets</strong>:</p>
                    <table style="margin-left: 0; margin-right: auto;">
                        <col />
                        <col />
                        <tbody>
                            <tr>
                                <td>1.</td>
                                <td>
                                    <p>Require the Product Set <span class="Generalbundle/module">module</span>s in your <var>composer.json</var> by running: </p>
                                </td>
                            </tr>
                            <tr>
                                <td>&#160;</td>
                                <td>
                                    <p><var>composer require spryker/product-set spryker/product-set-collector spryker/product-set-gui</var>
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <td>2.</td>
                                <td>
                                    <p>Install the new database tables by running:</p>
                                </td>
                            </tr>
                            <tr>
                                <td>&#160;</td>
                                <td>
                                    <p><var>vendor/bin/console propel:diff</var>
                                    </p>
                                    <p>Propel should generate a migration file with the changes.</p>
                                </td>
                            </tr>
                            <tr>
                                <td>3.</td>
                                <td>
                                    <p>Apply the database changes, run: </p>
                                </td>
                            </tr>
                            <tr>
                                <td>&#160;</td>
                                <td><var>vendor/bin/console propel:migrate</var>
                                </td>
                            </tr>
                            <tr>
                                <td>4.</td>
                                <td>
                                    <p>To generate ORM models, run: </p>
                                </td>
                            </tr>
                            <tr>
                                <td>&#160;</td>
                                <td><var>vendor/bin/console propel:model:build</var>
                                </td>
                            </tr>
                            <tr>
                                <td>5.</td>
                                <td>
                                    <p>After running this command, new classes are added. </p>
                                </td>
                            </tr>
                            <tr>
                                <td>&#160;</td>
                                <td>
                                    <p>(The classes are located in your project under the <var>\Orm\Zed\ProductSet\Persistence</var> namespace. </p>
                                    <p>Make sure that they extend the base classes from the Spryker core, e.g.:</p>
                                    <ul>
                                        <li value="1"><var>\Orm\Zed\ProductSet\Persistence\SpyProductSet</var> extends <var>\Spryker\Zed\ProductSet\Persistence\Propel\AbstractSpyProductSet</var></li>
                                        <li value="2"><var>\Orm\Zed\ProductSet\Persistence\SpyProductSetData</var> extends <var>\Spryker\Zed\ProductSet\Persistence\Propel\AbstractSpyProductSetData</var></li>
                                        <li value="3"><var>\Orm\Zed\ProductSet\Persistence\SpyProductAbstractSet</var> extends <var>\Spryker\Zed\ProductSet\Persistence\Propel\AbstractSpyProductAbstractSet</var></li>
                                        <li value="4"><var>\Orm\Zed\ProductSet\Persistence\SpyProductSetQuery</var> extends <var>\Spryker\Zed\ProductSet\Persistence\Propel\AbstractSpyProductSetQuery</var></li>
                                        <li value="5"><var>\Orm\Zed\ProductSet\Persistence\SpyProductSetDataQuery</var> extends <var>\Spryker\Zed\ProductSet\Persistence\Propel\AbstractSpyProductSetDataQuery</var></li>
                                        <li value="6"><var>\Orm\Zed\ProductSet\Persistence\SpyProductAbstractSetQuery</var> extends <var>\Spryker\Zed\ProductSet\Persistence\Propel\AbstractSpyProductAbstractSetQuery</var></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>6.</td>
                                <td>
                                    <p>To get the new transfer objects, run:</p>
                                </td>
                            </tr>
                            <tr>
                                <td>&#160;</td>
                                <td>
                                    <p><var>vendor/bin/console transfer:generate</var>
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <td>7.</td>
                                <td>
                                    <p>To rebuild Zed navigation, run:</p>
                                </td>
                            </tr>
                            <tr>
                                <td>&#160;</td>
                                <td><var>vendor/bin/console navigation:build-cache</var> <![CDATA[ ]]></td>
                            </tr>
                            <tr>
                                <td>8.</td>
                                <td>
                                    <p>Activate the Product Set collectors: </p>
                                </td>
                            </tr>
                            <tr>
                                <td>&#160;</td>
                                <td>Adding the <var>ProductSetCollectorStoragePlugin</var> to the storage collector plugin stack and <var>ProductSetCollectorSearchPlugin</var> to the search collector plugin stack, see example below:</td>
                            </tr>
                        </tbody>
                    </table><pre><code class="bash">&lt;?php

namespace Pyz\Zed\Collector;

use Spryker\Shared\ProductSet\ProductSetConfig;
use Spryker\Zed\Kernel\Container;
use Spryker\Zed\ProductSetCollector\Communication\Plugin\ProductSetCollectorSearchPlugin;
use Spryker\Zed\ProductSetCollector\Communication\Plugin\ProductSetCollectorStoragePlugin;
// ...

class CollectorDependencyProvider extends SprykerCollectorDependencyProvider
{
    /**
     * @param \Spryker\Zed\Kernel\Container $container
     *
     * @return \Spryker\Zed\Kernel\Container
     */
    public function provideBusinessLayerDependencies(Container $container)
    {
        // ...

        $container[self::SEARCH_PLUGINS] = function (Container $container) {
            return [
                // ...
                ProductSetConfig::RESOURCE_TYPE_PRODUCT_SET =&gt; new ProductSetCollectorSearchPlugin(),
            ];
        };
       
        $container[self::STORAGE_PLUGINS] = function (Container $container) {
            return [
                // ...
                ProductSetConfig::RESOURCE_TYPE_PRODUCT_SET =&gt; new ProductSetCollectorStoragePlugin(),
            ];
        };
        
        // ...
    }
}</code></pre>
                    <h3>Data setup</h3>
                    <p>You should now be able to use the ProductSet <span class="Generalbundle/module">module</span>’s Zed API to manage Product Sets, and the collectors should also be able to export them to the KV storage and Elasticsearch. In Zed you can also manage Product Sets under <a href="http://zed.de.demoshop.local/product-set-gui" target="_blank">Products / Product Sets</a> menu point.</p>
                    <p>This is a good time to implement an installer in your project to put products together in sets representing how you want them to be displayed in your shop frontend. Check out our <a href="https://github.com/spryker/demoshop" target="_blank">Demoshop implementation</a> for examples and ideas.</p>
                    <h3><a name="Listing"></a>Listing Products Sets in Yves</h3>
                    <p>The KV storage and Elasticsearch should by now have some Product Sets you can list and display in your shop. The exported documents in Search by default, do not support the configurable search features as products (full-text search, faceted navigation, sorting and pagination). However, since their data structure is the same it is possible to implement the same features with a custom implementation.</p>
                    <p>For simple listing the <var>ProductSet</var> <span class="Generalbundle/module">module</span> provides a Client API to list Product Sets from Elasticsearch. By calling the <var>ProductSetClient::getProductSetList()</var> method, a limited set of documents can be listed in Yves. The results are sorted in descending order by the Product Set’s <var>weight</var> attribute.</p>
                    <p>The executed search query works the same way as described in <a href="../search/search_query.html" class="MCXref xref">Search Query</a>. </p>
                    <p>If you need to extend the query, for example by filtering current store and locale, you will need to add the necessary query expander plugins, like in the example below. Also, to format the raw response from Elasticsearch we also need to provide a result formatter plugin. A result formatter plugin, is also provided by the <var>ProductSet</var> <span class="Generalbundle/module">module</span>. </p>
                    <p>Take a look at the following example to see how to activate the plugins:</p><pre><code class="bash">&lt;?php

namespace Pyz\Client\ProductSet;

use Spryker\Client\ProductSet\Plugin\Elasticsearch\ResultFormatter\ProductSetListResultFormatterPlugin;
use Spryker\Client\ProductSet\ProductSetDependencyProvider as SprykerProductSetDependencyProvider;
use Spryker\Client\Search\Plugin\Elasticsearch\QueryExpander\LocalizedQueryExpanderPlugin;
use Spryker\Client\Search\Plugin\Elasticsearch\QueryExpander\StoreQueryExpanderPlugin;

class ProductSetDependencyProvider extends SprykerProductSetDependencyProvider
{

    /**
     * @return array
     */
    protected function getProductSetListResultFormatterPlugins()
    {
        return [
            new ProductSetListResultFormatterPlugin(),
        ];
    }

    /**
     * @return array
     */
    protected function getProductSetListQueryExpanderPlugins()
    {
        return [
            new LocalizedQueryExpanderPlugin(),
            new StoreQueryExpanderPlugin(),
        ];
    }

}</code></pre>
                    <p>&#160;</p>
                    <p class="tip"><strong>Sorting Product Sets</strong>
                        <br />There's a Zed UI to be able to easily sort Product Sets compared to each other under the <a href="http://zed.de.demoshop.local/product-set-gui/reorder" target="_blank">Reorder Product Sets</a> page</p>
                    <h3>Next steps</h3>
                    <p>Integrating the Product Set feature in Yves is completely up to your project’s requirements. The following points summarize how we integrated this feature into our Demoshop:</p>
                    <ol>
                        <li value="1">Added controller (<var>\Pyz\Yves\ProductSet\Controller\ListController</var>) and template to list Product Sets on a specific URL (provided by <var>\Pyz\Yves\ProductSet\Plugin\Provider\ProductSetControllerProvider</var>). This controller uses the predefined <var>ProductSetClient::getProductSetList()</var> client method, as described <a href="#Listing" class="MCXref xref">Listing Products Sets in Yves</a>. The URL of the list page was added to the main navigation demo data.</li>
                        <li value="2">To be able to display Product Sets on their own assigned URL, we’ve added a resource creator (<var>\Pyz\Yves\ProductSet\ResourceCreator\ProductSetResourceCreator</var>) and added it to the existing resource creator list (<var>\Pyz\Yves\Collector\CollectorFactory::createResourceCreators()</var>). This will ensure URL matching and URL generation of Product Sets.</li>
                        <li value="3">Added controller (<var>\Pyz\Yves\ProductSet\Controller\DetailController</var>) and template to display Product Set Detail Page on their assigned URLs. The controller receives a hydrated <var>StorageProductSetTransfer</var> object and a list of <var>StorageProductTransfer</var> objects provided by the resource creator.</li>
                        <li value="4">On the Product Set Detail Page we had to ensure that it’s possible to select variants of the abstract products in the Set. The variant selection logic is part of the resource creating process.</li>
                        <li value="5">We’ve added “Add to cart” buttons per each product and also an “Add all to cart” when all variants are selected. To handle adding multiple items to cart at once, we’ve added a custom cart controller action (<var>\Pyz\Yves\Cart\Controller\CartController::addItemsAction()</var>).</li>
                    </ol>
                    <p>Check out our <a href="https://github.com/spryker/demoshop" target="_blank">Demoshop</a> for more detailed examples and ideas regarding the complete Yves integration.</p>
                    <h2>Under the hood</h2>
                    <h3>Database schema</h3>
                    <p>The <var>ProductSet</var> <span class="Generalbundle/module">module</span> provides a <var>spy_product_set</var> table that stores some non-localized data about Product Set entities. Localized data is stored in the <var>spy_product_set_data</var> table. These tables, along with their related URLs and Product Image Sets, contain all necessary data about Product Set entities that you can list in Yves or show their representing Detail Pages.</p>
                    <p>The products that Product Sets represent are stored in the <var>spy_product_abstract_set</var> table along with their sorting position.</p>
                    <p>
                        <img src="../../../resources/images/product_set_db_schema.png" title="Product Set Database Schema" alt="Product Set Database Schema" />
                    </p>
                </div>
                <div class="t-page-sidebar__sidebar g-col g-col--sm-12 g-col--xl-4 u-is-hidden--sm-xl">
                    <section class="a-box a-box--shadow">
                        <nav class="m-nav-sidebar" id="nav-sidebar">
                            <ul class="nocontent menu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/spryker_content.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                            </ul>
                        </nav>
                    </section>
                </div>
            </main>
            <div class="t-base__footer">
                <footer class="o-footer g-grid g-grid--middle">
                    <nav class="g-grid g-grid--container g-grid--center"><a class="o-footer__link" href="https://spryker.com/privacy-policy" target="_blank">Privacy policy</a><a class="o-footer__link" href="https://spryker.com/partneragb" target="_blank">AGB Partnerprogram</a><a class="o-footer__link" href="https://spryker.com/impressum" target="_blank">Impressum</a>
                    </nav>
                </footer>
            </div><a class="a-scroll-top js-scroll-top" href="#"><span class="a-scroll-top__icon icon icon-chevron-up"></span></a>
            <div class="t-base__overlay js-base-template__toggler">
            </div>
        </div>
        <div class="t-base__off">
            <section class="o-off-canvas">
                <nav class="m-nav-mobile" id="nav-mobile">
                    <ul class="nocontent menu mc-component" data-mc-linked-toc="Data/Tocs/spryker_content.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    </ul>
                </nav>
            </section>
        </div>
        <script src="/resources/ui/js/academy-ui-manifest.js">
        </script>
        <script src="/resources/ui/js/academy-ui-vendor.js">
        </script>
        <script src="/resources/ui/js/academy-ui-app.js">
        </script>
        <script>/* <![CDATA[ */
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-56589105-2', 'auto');
        ga('send', 'pageview');
    /* ]]> */</script>
        <script type="text/javascript" id="hs-script-loader" src="//js.hs-scripts.com/2770802.js">
        </script>
    </body>
</html>